From 656959ac0852e030558bf42834765170ca26e6fa Mon Sep 17 00:00:00 2001
From: Alessandro Vargiu <s314294@studenti.polito.it>
Date: Wed, 1 Nov 2023 15:28:30 +0100
Subject: [PATCH] postsynth_filter working

---
 lab1/netlists/FIR_Filter_2.2ns_postsyn.v |  2 +-
 lab1/scripts/sim.sh                      |  8 +++-----
 lab1/scripts/syn.sh                      |  0
 lab1/sim/components                      |  2 +-
 lab1/tb/mytb.v                           | 26 ++++++++++++------------
 5 files changed, 18 insertions(+), 20 deletions(-)
 mode change 100644 => 100755 lab1/scripts/sim.sh
 mode change 100644 => 100755 lab1/scripts/syn.sh

diff --git a/lab1/netlists/FIR_Filter_2.2ns_postsyn.v b/lab1/netlists/FIR_Filter_2.2ns_postsyn.v
index f8c4876..74c75df 100644
--- a/lab1/netlists/FIR_Filter_2.2ns_postsyn.v
+++ b/lab1/netlists/FIR_Filter_2.2ns_postsyn.v
@@ -3,7 +3,7 @@
 // Version   : S-2021.06-SP4
 // Date      : Mon Oct 30 17:42:16 2023
 /////////////////////////////////////////////////////////////
-
+// `timescale 1 ns / 1 ns
 
 module FIR_Filter_DW_mult_tc_8 ( a, b, product );
   input [8:0] a;
diff --git a/lab1/scripts/sim.sh b/lab1/scripts/sim.sh
old mode 100644
new mode 100755
index 1f55d94..26127d7
--- a/lab1/scripts/sim.sh
+++ b/lab1/scripts/sim.sh
@@ -50,9 +50,7 @@ if [ $? -ne 0 ]; then
 fi
 
 # Start simulation
-if ps aux | grep -q [v]sim; then
-    exit 1
-else
+#if ps aux | grep -q [v]sim; then
+#   exit 1
     cd $SIM_DIR
-    vsim -t 10ps work.tb -voptargs=+acc
-fi
+    vsim -t 10ps -L /eda/dk/nangate45/verilog/qsim2020.4 work.tb -voptargs=+acc
diff --git a/lab1/scripts/syn.sh b/lab1/scripts/syn.sh
old mode 100644
new mode 100755
diff --git a/lab1/sim/components b/lab1/sim/components
index 60ddd3e..23e9ef8 100644
--- a/lab1/sim/components
+++ b/lab1/sim/components
@@ -1,5 +1,5 @@
 src/constants.vhd
-src/firfilter.vhd
+netlists/FIR_Filter_2.2ns_postsyn.v
 
 src/clk_gen.vhd
 src/data_maker_new.vhd
diff --git a/lab1/tb/mytb.v b/lab1/tb/mytb.v
index 523a203..54880a0 100644
--- a/lab1/tb/mytb.v
+++ b/lab1/tb/mytb.v
@@ -1,13 +1,14 @@
-`timescale 1ns / 1ps
+// `timescale 1ns / 1ps
 
 module tb;
 
   parameter Nb = 9;
-
+  
   // Port declarations
   wire [Nb-1:0] datamaker_DOUT;
   wire [Nb-1:0] filter_DOUT;
-  wire [Nb-1:0] B [8:0];
+  //wire [Nb-1:0] B [0:Nb-1];
+  wire [80:0] B;
   wire filter_VOUT;
   wire datamaker_VOUT;
   wire CLK;
@@ -31,15 +32,15 @@ module tb;
     .RST_n(RST_n),
     .VOUT(datamaker_VOUT),
     .DOUT(datamaker_DOUT),
-    .B0(B[0]),
-    .B1(B[1]),
-    .B2(B[2]),
-    .B3(B[3]),
-    .B4(B[4]),
-    .B5(B[5]),
-    .B6(B[6]),
-    .B7(B[7]),
-    .B8(B[8]),
+    .B0(B[8:0]),
+    .B1(B[17:9]),
+    .B2(B[26:18]),
+    .B3(B[35:27]),
+    .B4(B[44:36]),
+    .B5(B[53:45]),
+    .B6(B[62:54]),
+    .B7(B[71:63]),
+    .B8(B[80:72]),
     .END_SIM(END_SIM)
   );
 
@@ -67,7 +68,6 @@ module tb;
 
     // Add testbench stimulus and checks as needed
     
-
 end
 
 endmodule : tb
-- 
2.42.0

